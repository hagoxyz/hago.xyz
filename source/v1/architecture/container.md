---
title: 服务容器
---

# 服务容器

Container 服务容器是一个用于管理`类的依赖`和`执行依赖注入`的强大工具。其实质是通过反射来对`构造函数`或者标记为`[Inject]`特性的属性选择器进行注入。

## 简介

几乎所有的服务绑定都是在服务提供者中完成。如果一个`服务`没有基于任何接口那么就没有必要将其绑定到容器(除非他是组件内部使用的类)。

容器并不需要被告知如何构建对象，因为它会使用反射技术自动解析出具体的对象实例。

在服务提供者中我们可以使用`Bind()`或者`Singleton()`方法来注册一个`服务`的绑定。

在Hago核心库中[应用程序](application.html)继承自服务容器，所以在任何位置，您可以通过`App`全局变量访问容器。

## 构建服务

您可以通过`Make()`方法来构建服务。如果通过容器去生成一个没有被绑定的服务，那么容器会根据策略尝试解决需要被生成的服务，如果尝试解决失败，那么将会抛出一个`UnresolvableException`异常。

```csharp
var fileSystem = App.Make<IFileSystem>();
```

#### 构建服务时传入自定义参数

Hago支持在构建一个服务时为其提供自定义的参数，您只需要这样做：

```csharp
var fileSystem = App.Make<IFileSystem>("params-1", "params-2");
```

## 绑定服务

要使用服务容器的强大特性您首先需要将服务绑定到服务容器，如果您不进行绑定,那么您将没有任何服务可用，这些绑定一般都是在[服务提供者](service-provider.html)中完成的。

绑定服务分为以下两种类型：

- `实例绑定` 每次调用都会产生一个全新实例。
- `单例绑定` 将类或者接口绑定到服务容器，一旦单例绑定被构建，每次调用总是返回相同的实例。